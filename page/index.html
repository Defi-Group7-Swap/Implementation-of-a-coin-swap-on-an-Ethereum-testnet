<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Coin Swap</title>
    <!-- <script type="module" src="../app.js"></script> -->
    <link rel="stylesheet" type="text/css" href="./css/index.css">
    <link href="https://fonts.googleapis.com/css?family=Futura:400,700&display=swap" rel="stylesheet">
    <link rel="icon" href="./images/favicon.ico" type="image/x-icon">
</head>
<div id="container">
<script type="module">
    import { ethers } from "../ethers-5.6.esm.min.js";
    window.addEventListener("load", async () => {
    const connectButton = document.getElementById("connectButton");

// If the user's browser has MetaMask or another wallet that supports Web3 installed, use ethers.js to connect to the user's wallet
if (window.ethereum) {
  window.provider = new ethers.providers.Web3Provider(window.ethereum);
  try {
    // await window.ethereum.enable();
    if ((await ethereum.request({ method: "eth_accounts" })).length) {
      const accounts = (
          await ethereum.request({ method: "eth_accounts" })
        ).toString();
        connectButton.innerHTML = `<image src="./images/MetaMask-Fox.png" id="Fox" width="20px" style="flex: none;margin-right:5px;margin-left:20px;"/> ${accounts.slice(
          0,
          6
        )}...${accounts.slice(-4)}`;
        connectButton.style =
          "width:200px; background-color: powderblue; color: white;display: flex;align-items: center;text-align:center;";
    }
  } catch (error) {
    console.error("Not Connected!");
  }
} else if (window.web3) {
  window.provider = new ethers.providers.Web3Provider(
    window.web3.currentProvider
  );
} else {
  console.error("No web3 provider detected");
}

connectButton.addEventListener("click", async () => {
    if (typeof window.ethereum !== "undefined") {
      await window.ethereum.request({ method: "eth_requestAccounts" });
      const accounts = (
        await ethereum.request({ method: "eth_accounts" })
      ).toString();
      connectButton.innerHTML = `<image src="./images/MetaMask-Fox.png" id="Fox" width="20px" style="flex: none;margin-right:5px;margin-left:20px;"/> ${accounts.slice(
        0,
        6
      )}...${accounts.slice(-4)}`;
      connectButton.style =
        "width:200px; background-color: powderblue; color: white;display: flex;align-items: center;text-align:center;";
   } else {
      connectButton.innerHTML = "Please connect your metamask!";
    }
  });
});
</script>
    <body id="update">
        <div id="header">
            <image src="./images/icon.png" alt="icon" width="160" height="90" />
            <button id="connectButton" class="futura">Connect</button>
            <button id="" class="futura" onclick="window.location.href='Swap.html'">Swap</button>
            <button id="" class="futura" onclick="window.location.href='LP.html'">Liquidity Pool</button>
        </div>
        <div id="mainbody" class="futura">
            <a href="Swap.html"><img src="./images/swap.png"></a>
        </div>

    </body>
</div>

</html>